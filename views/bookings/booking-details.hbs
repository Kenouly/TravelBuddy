<div class="container-home">
    <h2 class="form-title">Add a booking</h2>
    <form action="/bookings/add" method="post">
        <div id="booking-form">
            <label for="bookingReference">Booking Reference</label>
            <input type="text" name="bookingReference">
            <label for="control-label">From</label>
            <input type="text" class="autocomplete" name="departureAirport">
            <label for="control-label">To</label>
            <input type="text" class="autocomplete" name="arrivalAirport" id="arrivalAirport">
            <label for="latitude">Latitude</label>
            <input type="text" id="lat" value="" name="latitude">
            <label for="longitude">Longitude</label>
            <input type="text" id="lng" value="" name="longitude">
            <label for="departure-date">Departure Date</label>
            <input type="date" name="departureDate">
            <label for="departure-time">Time</label>
            <input type="time" name="departureTime">
            <label for="arrival-date">Arrival Date</label>
            <input type="date" name="arrivalDate">
            <label for="arrival-time">Time</label>
            <input type="time" name="arrivalTime">
            <label for="return-date">Return Date</label>
            <input type="date" name="returnDate">
            <label for="return-time">Time</label>
            <input type="time" name="returnTime">
            <button type='submit'>Add booking</button>
        </div>
            {{#if errorMessage}}
            <p class="error">{{errorMessage}}</p>
            {{/if}}
    </form>
</div>

<script src="http://maps.google.com/maps/api/js?sensor=false&key=AIzaSyAT6b8kxnytHUgolGq4A89WLwyW0XchJ84"></script>
<script>

    var geocoder = new google.maps.Geocoder();
    const input = document.getElementById('arrivalAirport')
    const address = input.value
    input.addEventListener('focusout', function() {
        geocoder.geocode({address: input.value}, function (results, status) {
            console.log(status)
            if (status == google.maps.GeocoderStatus.OK) {
                var latitude = results[0].geometry.location.lat()
                var longitude = results[0].geometry.location.lng()
                console.log(latitude)
                console.log(longitude)
                document.getElementById('lat').value = latitude
                document.getElementById('lng').value = longitude
            }
        }); 
        console.log('success')
    })
</script>
